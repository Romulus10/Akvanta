var mapsChecked = 0;
var underMap = [["0", "^", "0", "1", "0", "0", "0", "0", "0", "0", "^", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0"],
    ["0", "0", "0", "0", "^", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0"],
    ["0", "0", "1", "0", "0", "1", "0", "0", "0", "0", "1", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0"],
    ["0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0"],
    ["0", "0", "0", "0", "0", "0", "0", "3", "0", "0", "2", "0", "0", "0", "0", "!", "0", "0", "0", "0", "0", "0", "0", "0"],
    ["0", "0", "^", "0", "0", "0", "0", "0", "0", "0", "0", "^", "0", "0", "1", "0", "0", "0", "0", "0", "0", "0", "0", "0"],
    ["0", "0", "0", "^", "0", "!", "0", "^", "0", "!", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0"],
    ["0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0"],
    ["0", "0", "0", "0", "0", "0", "0", "0", "^", "0", "0", "0", "0", "0", "0", "0", "0", "0", "!", "0", "0", "0", "4", "0"],
    ["0", "0", "0", "0", "0", "0", "0", "^", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0"],
    ["0", "0", "^", "0", "0", "0", "0", "0", "0", "0", "0", "^", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0"],
    ["0", "0", "0", "^", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "!", "0", "0", "0", "0", "0", "0", "0", "0"],
    ["0", "0", "0", "0", "0", "0", "!", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "5", "0", "0", "0", "0", "0"],
    ["0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0"],
    ["0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0"]];

function makeAMap() {
    mapsChecked++;
    for (var x = 0; x < 15; x++) {
        for (var y = 0; y < 24; y++) {
            var contents = Math.random() * 1000;
            if (contents <= 25) {
                underMap[x][y] = "5";
            }
            else if (contents <= 100 && contents > 50) {
                underMap[x][y] = "4";
            }
            else if (contents <= 225 && contents > 125) {
                underMap[x][y] = "3";
            }
            else if (contents <= 350 && contents > 225) {
                underMap[x][y] = "2";
            }
            else if (contents <= 575 && contents > 375) {
                underMap[x][y] = "1";
            }
            else if (contents <= 700 && contents > 600) {
                underMap[x][y] = "!";
            }
            else if (contents <= 800 && contents > 700) {
                underMap[x][y] = "^";
            }
            else {
                underMap[x][y] = "0";
            }
        }
    }
    var viability = 100;
    var bossCount = 0;
    var strongCount = 0;
    var medCount = 0;
    var nullSpace = 0;
    var immediateRiskOfDeath = 0;
    for (var x = 0; x < 15; x++) {
        for (var y = 0; y < 24; y++) {
            if (underMap[x][y] == "5") {
                bossCount++;
            }
        }
    }
    for (var x = 0; x < 15; x++) {
        for (var y = 0; y < 24; y++) {
            if (underMap[x][y] == "4") {
                strongCount++;
            }
        }
    }
    for (var x = 0; x < 15; x++) {
        for (var y = 0; y < 24; y++) {
            if (underMap[x][y] == "3") {
                medCount++;
            }
        }
    }
    for (var x = 0; x < 15; x++) {
        for (var y = 0; y < 24; y++) {
            if (underMap[x][y] == "0") {
                nullSpace++;
            }
        }
    }
    for (var x = 0; x < 7; x++) {
        for (var y = 0; y < 12; y++) {
            if (underMap[x][y] == "5" || underMap[x][y] == "4") {
                immediateRiskOfDeath += 2;
            }
            if (underMap[x][y] == "3") {
                immediateRiskOfDeath++;
            }
        }
    }
    if (bossCount >= 4 || bossCount <= 1) {
        viability -= 20;
    }
    if (strongCount >= 7 || strongCount <= 4) {
        viability -= 10;
    }
    if (medCount >= 10 || medCount <= 5) {
        viability -= 5;
    }
    if (nullSpace >= 240 || nullSpace <= 120) {
        viability -= 10;
    }
    if (immediateRiskOfDeath > 7) {
        viability -= 20;
    }
    console.log(viability + "%");
    console.log("Maps checked: " + mapsChecked);
    if (mapsChecked < 5000){
        makeAMap();        
    }
}